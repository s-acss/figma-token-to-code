<style>
    @charset "utf-8";

    .di {
        display: inline
    }

    .db {
        display: block
    }

    .dn {
        display: none
    }

    .dib {
        display: inline-block
    }

    .oh {
        overflow: hidden
    }

    .oa {
        overflow: auto;
        -webkit-overflow-scrolling: touch
    }

    .w100p {
        width: 100%
    }

    .h100p {
        height: 100%
    }

    .vam {
        vertical-align: middle
    }

    .pr {
        position: relative
    }

    .pf {
        position: fixed
    }

    .pa {
        position: absolute
    }

    .z1 {
        z-index: 1
    }

    .t0 {
        top: 0
    }

    .r0 {
        right: 0
    }

    .b0 {
        bottom: 0
    }

    .l0 {
        left: 0
    }

    .t50p {
        top: 50%
    }

    .l50p {
        left: 50%
    }

    .l100p {
        left: 100%
    }

    .t100p {
        top: 100%
    }

    .mla {
        margin-left: auto
    }

    .mra {
        margin-right: auto
    }

    .fl {
        float: left;
        display: inline
    }

    .fr {
        float: right
    }

    .df {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex
    }

    .dif {
        display: -webkit-inline-box;
        display: -ms-inline-flexbox;
        display: inline-flex
    }

    .fa {
        -webkit-box-flex: 1;
        -ms-flex: auto;
        flex: auto
    }

    .aic {
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center
    }

    .aife {
        -webkit-box-align: end;
        -ms-flex-align: end;
        align-items: flex-end
    }

    .aifs {
        -webkit-box-align: start;
        -ms-flex-align: start;
        align-items: flex-start
    }

    .fdr {
        -webkit-box-orient: horizontal;
        -webkit-box-direction: normal;
        -ms-flex-direction: row;
        flex-direction: row
    }

    .fdc {
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
        -ms-flex-direction: column;
        flex-direction: column
    }

    .fww {
        -ms-flex-wrap: wrap;
        flex-wrap: wrap
    }

    .fs1 {
        -ms-flex-negative: 1;
        flex-shrink: 1
    }

    .f1 {
        -webkit-box-flex: 1;
        -ms-flex: 1;
        flex: 1;
        min-width: 0
    }

    .jcsb {
        -webkit-box-pack: justify;
        -ms-flex-pack: justify;
        justify-content: space-between
    }

    .jcsa {
        -ms-flex-pack: distribute;
        justify-content: space-around
    }

    .jcc {
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        justify-content: center
    }

    .jcfe {
        -webkit-box-pack: end;
        -ms-flex-pack: end;
        justify-content: flex-end
    }

    .vh {
        visibility: hidden
    }

    .br100p {
        border-radius: 100%
    }

    .fvsc {
        font-variant: small-caps;
        text-transform: lowercase
    }

    .fs0 {
        font-size: 0
    }

    .fwn {
        font-weight: 400
    }

    .fwb {
        font-weight: 700
    }

    .fsi {
        font-style: italic
    }

    .wsn {
        white-space: nowrap
    }

    .wwbw {
        word-wrap: break-word;
        word-break: break-all
    }

    .lh1d5 {
        line-height: 1.5
    }

    .lh1d8 {
        line-height: 1.8
    }

    .tar {
        text-align: right
    }

    .tac {
        text-align: center
    }

    .tal {
        text-align: left
    }

    .ttu {
        text-transform: uppercase
    }

    .ttc {
        text-transform: capitalize
    }

    .ttn {
        text-transform: none
    }

    .ttl {
        text-transform: lowercase
    }

    .tdn {
        text-decoration: none
    }

    .c_fff {
        color: #fff
    }

    .c_000 {
        color: #000
    }

    .bc_fff {
        background-color: #fff
    }

    .clearfix:after {
        display: table;
        content: '';
        clear: both
    }

    .ell {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis
    }

    .mt4 {
        margin-top: 4px
    }

    .mt8 {
        margin-top: 8px
    }

    .mt12 {
        margin-top: 12px
    }

    .mt16 {
        margin-top: 16px
    }

    .mr4 {
        margin-right: 4px
    }

    .mr8 {
        margin-right: 8px
    }

    .mr12 {
        margin-right: 12px
    }

    .mr16 {
        margin-right: 16px
    }

    .mb4 {
        margin-bottom: 4px
    }

    .mb8 {
        margin-bottom: 8px
    }

    .mb12 {
        margin-bottom: 12px
    }

    .mb16 {
        margin-bottom: 16px
    }

    .ml4 {
        margin-left: 4px
    }

    .ml8 {
        margin-left: 8px
    }

    .ml12 {
        margin-left: 12px
    }

    .ml16 {
        margin-left: 16px
    }

    .pt4 {
        padding-top: 4px
    }

    .pt8 {
        padding-top: 8px
    }

    .pt12 {
        padding-top: 12px
    }

    .pt16 {
        padding-top: 16px
    }

    .pr4 {
        padding-right: 4px
    }

    .pr8 {
        padding-right: 8px
    }

    .pr12 {
        padding-right: 12px
    }

    .pr16 {
        padding-right: 16px
    }

    .pb4 {
        padding-bottom: 4px
    }

    .pb8 {
        padding-bottom: 8px
    }

    .pb12 {
        padding-bottom: 12px
    }

    .pb16 {
        padding-bottom: 16px
    }

    .pl4 {
        padding-left: 4px
    }

    .pl8 {
        padding-left: 8px
    }

    .pl12 {
        padding-left: 12px
    }

    .pl16 {
        padding-left: 16px
    }

    .fs12 {
        font-size: 12px
    }

    .fs16 {
        font-size: 16px
    }

    .lh16 {
        line-height: 16px
    }

    .lh24 {
        line-height: 24px
    }

    .f2 {
        -webkit-box-flex: 2;
        -ms-flex: 2;
        flex: 2
    }

    .f3 {
        -webkit-box-flex: 3;
        -ms-flex: 3;
        flex: 3
    }

    .c_success {
        color: #1bc47d
    }

    .c_s {
        color: rgba(0, 0, 0, .6)
    }

    * {
        margin: 0;
        font-family: inherit;
        font-size: inherit;
        font-weight: inherit;
        -webkit-box-sizing: border-box;
        box-sizing: border-box
    }

    hr,
    li,
    ol,
    pre,
    ul {
        padding: 0
    }

    body {
        padding: 40px 0 0;
        font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif;
        font-size: 16px;
        line-height: 1.5;
        color: rgba(0, 0, 0, .8)
    }

    svg {
        fill: currentColor
    }

    a {
        text-decoration: none;
        color: inherit
    }

    .wrap {
        margin-left: 16px;
        margin-right: 16px
    }

    .row {
        padding-left: 16px;
        padding-right: 16px
    }

    .hr {
        border: none 0;
        border-bottom: 1px solid #e0e5e5
    }

    .tab-switch {
        position: absolute
    }

    .tab-nav {
        border-bottom: 1px solid #e0e5e5;
        background-color: #fff
    }

    .tab-nav-item {
        white-space: nowrap;
        font-size: 12px;
        line-height: 16px;
        padding: 1em 0;
        color: #999;
        font-weight: 600;
        cursor: pointer;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        display: inline-block
    }

    .tab-nav-item+.tab-nav-item {
        margin-left: 1em
    }

    .tab-panel {
        display: none;
        position: fixed;
        left: 0;
        width: 100%;
        bottom: 0;
        top: 41px;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
        -ms-flex-direction: column;
        flex-direction: column;
        -webkit-box-pack: justify;
        -ms-flex-pack: justify;
        justify-content: space-between
    }

    .tab-panel>.textarea {
        -webkit-box-flex: 1;
        -ms-flex: 1;
        flex: 1;
        white-space: nowrap
    }

    .tab-panel>.textarea.f3 {
        -webkit-box-flex: 3;
        -ms-flex: 3;
        flex: 3
    }

    #tabSwitch1:checked~.tab-nav .tab-nav-item[for=tabSwitch1],
    #tabSwitch2:checked~.tab-nav .tab-nav-item[for=tabSwitch2],
    #tabSwitch3:checked~.tab-nav .tab-nav-item[for=tabSwitch3],
    .tab-nav-item:hover {
        color: #333
    }

    #tabSwitch1:checked~#formHtml,
    #tabSwitch2:checked~#formSetting,
    #tabSwitch3:checked~#formToken {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex
    }

    .btn {
        border: none 0;
        font-size: 12px;
        line-height: 1.5;
        padding: .75em 1em;
        cursor: pointer;
        text-transform: capitalize;
        border-radius: 8px;
        color: #333;
        border: 1px solid;
        background-color: transparent;
        -webkit-transition: .2s;
        transition: .2s;
        outline: 0;
        background-color: #fff
    }

    .btn:disabled {
        opacity: .3;
        pointer-events: none;
        cursor: not-allowed
    }

    .btn._block {
        display: block;
        width: 100%
    }

    .btn._del {
        opacity: .5
    }

    .btn._del:hover {
        color: #dc3545
    }

    .btn:hover {
        background-color: rgba(0, 0, 0, .02)
    }

    .btn:active {
        -webkit-transform: scale(.98);
        -ms-transform: scale(.98);
        transform: scale(.98)
    }

    .btn-group {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex
    }

    .input,
    .select {
        font-size: 12px;
        border-radius: 4px;
        height: 24px;
        background-color: #fff;
        border: 1px solid #e0e5e5
    }

    .input {
        padding: 3px 8px
    }

    .textarea {
        border: none 0;
        border-bottom: 1px solid #e0e5e5;
        padding: 4px 0;
        line-height: 1.8;
        background-color: #fff;
        font-size: 12px;
        border-radius: 0;
        -webkit-transition: .2s;
        transition: .2s
    }

    textarea.textarea {
        display: block;
        width: 100%;
        resize: none;
        padding: 8px 16px
    }

    .textarea._reverse {
        border-bottom: none 0;
        border-top: 1px solid #e0e5e5
    }

    .input:focus,
    .input:hover,
    .select:focus,
    .select:hover,
    .textarea:focus,
    .textarea:hover {
        border-color: #333
    }

    .input:focus,
    .select:focus,
    .textarea:focus {
        outline: 0
    }

    .setting-demo {
        font-size: 12px;
        color: #999;
        padding-top: 8px;
        margin-bottom: -1em
    }

    .setting-demo strong {
        color: #f24822
    }

    .setting-demo small {
        color: #690
    }

    .footer {
        padding: 16px
    }

    .i {
        display: inline-block;
        width: 32px;
        height: 32px;
        color: #000;
        background-repeat: no-repeat;
        background-position: 50% 50%
    }

    .i._trans {
        background-image: url(data:image/svg+xml;utf8,%3Csvg%20fill%3D%22none%22%20height%3D%2232%22%20viewBox%3D%220%200%2032%2032%22%20width%3D%2232%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20fill%3D%22%23000%22%3E%3Cpath%20d%3D%22m10.5%2011c-.2761%200-.5.2239-.5.5s.2239.5.5.5zm12.3536.8536c.1952-.1953.1952-.5119%200-.7072l-3.182-3.18193c-.1953-.19527-.5119-.19527-.7071%200-.1953.19526-.1953.51184%200%20.7071l2.8284%202.82843-2.8284%202.8284c-.1953.1953-.1953.5119%200%20.7071.1952.1953.5118.1953.7071%200zm-12.3536.1464h12v-1h-12z%22%2F%3E%3Cpath%20d%3D%22m21.5%2020c.2761%200%20.5.2239.5.5s-.2239.5-.5.5zm-12.35355.8536c-.19527-.1953-.19527-.5119%200-.7072l3.18195-3.1819c.1953-.1953.5119-.1953.7071%200%20.1953.1952.1953.5118%200%20.7071l-2.8284%202.8284%202.8284%202.8284c.1953.1953.1953.5119%200%20.7071-.1952.1953-.5118.1953-.7071%200zm12.35355.1464h-12v-1h12z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E)
    }

    .i._json {
        background-image: url(data:image/svg+xml;utf8,%3Csvg%20fill%3D%22none%22%20height%3D%2232%22%20viewBox%3D%220%200%2032%2032%22%20width%3D%2232%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20clip-rule%3D%22evenodd%22%20fill%3D%22%23000%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22m11.237%209.35989c.676-.35808%201.544-.35989%202.263-.35989.2761%200%20.5.22386.5.5s-.2239.5-.5.5c-.781%200-1.3794.0235-1.7949.2436-.1865.0987-.3351.2386-.4435.4556-.1127.2256-.1946.5606-.1946%201.0629v2.2379c0%20.882-.3216%201.5723-.9186%202.0255-.0677.0513-.1379.099-.21062.1431.07872.0523.15432.1083.22652.168.5665.4676.9027%201.1401.9027%201.9225v1.9788c0%20.5023.0819.8373.1946%201.0629.1084.217.257.3569.4435.4556.4155.2201%201.0139.2436%201.7949.2436.2761%200%20.5.2239.5.5s-.2239.5-.5.5c-.719%200-1.587-.0018-2.263-.3599-.3593-.1903-.6627-.4777-.8699-.8923-.2028-.4057-.3001-.9064-.3001-1.5099v-1.9788c0-.4767-.19722-.869-.53929-1.1513-.34886-.288-.87159-.4783-1.52771-.4783v-1c.69133%200%201.20948-.1467%201.54368-.4005.31153-.2365.52332-.611.52332-1.229v-2.2379c0-.6035.0973-1.1042.3001-1.5099.2072-.4146.5106-.702.8699-.89231z%22%2F%3E%3Cpath%20d%3D%22m20.763%209.35989c-.676-.35808-1.544-.35989-2.263-.35989-.2761%200-.5.22386-.5.5s.2239.5.5.5c.781%200%201.3794.0235%201.7949.2436.1865.0987.3351.2386.4435.4556.1127.2256.1946.5606.1946%201.0629v2.2379c0%20.882.3216%201.5723.9186%202.0255.0677.0513.1379.099.2106.1431-.0787.0523-.1543.1083-.2265.168-.5665.4676-.9027%201.1401-.9027%201.9225v1.9788c0%20.5023-.0819.8373-.1946%201.0629-.1084.217-.257.3569-.4435.4556-.4155.2201-1.0139.2436-1.7949.2436-.2761%200-.5.2239-.5.5s.2239.5.5.5c.719%200%201.587-.0018%202.263-.3599.3593-.1903.6627-.4777.8699-.8923.2028-.4057.3001-.9064.3001-1.5099v-1.9788c0-.4767.1972-.869.5393-1.1513.3489-.288.8716-.4783%201.5277-.4783v-1c-.6913%200-1.2095-.1467-1.5437-.4005-.3115-.2365-.5233-.611-.5233-1.229v-2.2379c0-.6035-.0973-1.1042-.3001-1.5099-.2072-.4146-.5106-.702-.8699-.89231z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E)
    }

    .i._light {
        background-image: url(data:image/svg+xml;utf8,%3Csvg%20fill%3D%22none%22%20height%3D%2232%22%20viewBox%3D%220%200%2032%2032%22%20width%3D%2232%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22m14.4709%2019.5c-.1221-1.0332-.6058-1.7986-1.0328-2.4744l-.0154-.0244c-.5043-.7982-.9227-1.4749-.9227-2.4521%200-1.6294%201.5091-3.0491%203.5-3.0491s3.5%201.4197%203.5%203.0491c0%20.9636-.4183%201.6452-.9236%202.4512l-.0152.0243c-.426.6792-.909%201.4495-1.0317%202.4754z%22%20stroke%3D%22%23000%22%20stroke-opacity%3D%22.8%22%2F%3E%3Cpath%20d%3D%22m14%2021h4v1h-4z%22%20fill%3D%22%23000%22%20fill-opacity%3D%22.8%22%2F%3E%3Cpath%20d%3D%22m14%2023h4v1h-4z%22%20fill%3D%22%23000%22%20fill-opacity%3D%22.8%22%2F%3E%3Cpath%20d%3D%22m11%2018-2%202%22%20stroke%3D%22%23000%22%20stroke-opacity%3D%22.8%22%2F%3E%3Cpath%20d%3D%22m21%2018%202%202%22%20stroke%3D%22%23000%22%20stroke-opacity%3D%22.8%22%2F%3E%3Cpath%20d%3D%22m8%2013h3v1h-3z%22%20fill%3D%22%23000%22%20fill-opacity%3D%22.8%22%2F%3E%3Cpath%20d%3D%22m21%2013h3v1h-3z%22%20fill%3D%22%23000%22%20fill-opacity%3D%22.8%22%2F%3E%3Cg%20stroke%3D%22%23000%22%3E%3Cpath%20d%3D%22m18.5%209.5%202-2%22%2F%3E%3Cpath%20d%3D%22m13.5%209.5-2-2%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E)
    }

    .link-github {
        display: -webkit-inline-box;
        display: -ms-inline-flexbox;
        display: inline-flex;
        width: 40px;
        height: 40px;
        line-height: 40px;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        justify-content: center;
        margin-right: -16px
    }

    .link-github:active {
        background-color: rgba(0, 0, 0, .08)
    }

    .msg {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        font-size: 12px;
        background-color: #4c5fe2;
        color: #fff;
        padding: 1em 16px;
        line-height: 16px;
        text-transform: capitalize;
        -webkit-transition: .2s;
        transition: .2s;
        visibility: hidden;
        opacity: 0;
        -webkit-transform: translateY(100%);
        -ms-transform: translateY(100%);
        transform: translateY(100%)
    }

    .msg._on {
        visibility: visible;
        opacity: 1;
        -webkit-transform: translateY(0);
        -ms-transform: translateY(0);
        transform: translateY(0)
    }
</style>
<input class="pa vh" id="tabSwitch1" type="radio" name="tab" checked>
<input class="pa vh" id="tabSwitch2" type="radio" name="tab">
<input class="pa vh" id="tabSwitch3" type="radio" name="tab">
<!-- Tab start -->
<div class="tab-nav df aic jcsb row pf t0 l0 r0">
    <div>
        <label class="tab-nav-item" for="tabSwitch1">Generator</label>
        <label class="tab-nav-item" for="tabSwitch2">Setting</label>
        <label class="tab-nav-item" for="tabSwitch3">Design Token</label>
    </div>
    <a class="link-github" href="https://github.com/ziven27/Figma-ACSS" target="_blank" title="github for help">
        <svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20">
            <path d="M512 42.667a464.64 464.64 0 0 0-469.333 459.52 460.373 460.373 0 0 0 320.853 436.48c23.467 4.266 32-9.814 32-22.187V838.4c-130.56 27.733-158.293-61.44-158.293-61.44a122.027 122.027 0 0 0-52.054-67.413c-42.666-28.16 3.414-27.734 3.414-27.734a98.56 98.56 0 0 1 71.68 47.36A101.12 101.12 0 0 0 396.8 767.147a99.413 99.413 0 0 1 29.867-61.44c-104.107-11.52-213.334-50.774-213.334-226.987a177.067 177.067 0 0 1 47.36-124.16 161.28 161.28 0 0 1 4.694-121.173s39.68-12.374 128 46.933a455.68 455.68 0 0 1 234.666 0c89.6-59.307 128-46.933 128-46.933a161.28 161.28 0 0 1 4.694 121.173 177.067 177.067 0 0 1 49.92 123.307c0 176.64-110.08 215.466-213.334 226.986a106.667 106.667 0 0 1 32 85.334v125.866c0 14.934 8.534 26.88 32 22.187a460.8 460.8 0 0 0 320-436.053A464.64 464.64 0 0 0 512 42.667" />
        </svg>
    </a>
</div>
<!-- Tab end -->
<!-- generate start -->
<form class="tab-panel" id="formHtml">
    <div class="df pl8 pr16 pt8 pb8 hr">
        <div class="mr8">
            <i class="i _trans"></i>
        </div>
        <div class="f1 fs12 lh16 pt4 pb4 c_s">
            <p>Current setting: "<strong id="htmlSettingText" class="c_success">default</strong>"</p>
            <p>Change setting at 'setting tab'</p>
        </div>
    </div>
    <textarea placeholder="CSS" class="textarea" id="cssBody" cols="30" rows="8"></textarea>
    <textarea placeholder="HTML" style="height:329px;" class="textarea f3" id="htmlBody" cols="30" rows="16"></textarea>
    <div class="footer">
        <button type="submit" class="btn _block">Select text & Click generate</button>
    </div>
</form>
<!-- generate end -->
<!-- setting start -->
<form class="tab-panel" id="formSetting">
    <div class="df pl8 pr16 pt8 pb8 hr">
        <div class="mr8">
            <i class="i _json"></i>
        </div>
        <div class="f1 fs12 lh16 pt4 pb4 c_s">
            <p>Give each local style a alias as className</p>
            <p>Split localStyleName and className with ":" like JSON</p>
            <p>Tired of type localStyleName by hand go to Design Token</p>
        </div>
    </div>
    <div class="df pl16 pr16 pt8">
        <div class="f1 mr8">
            <label for="settingName" class="fs12 lh16 c_s mb4 db">Setting Name</label>
            <input id="settingName" class="w100p input" type="text" value="default" placeholder="Setting name">
        </div>
        <div class="f1">
            <label for="settingSelect" class="fs12 lh16 c_s mb4 db">Current Setting</label>
            <select id="settingSelect" class="w100p select mr8" name="setting name">
                <option value="default">default</option>
            </select>
        </div>
    </div>
    <textarea class="textarea" id="settingBody" cols="30" rows="23" placeholder="localStyleName : className"></textarea>
    <div class="footer df">
        <button type="button" id="btnDelSetting" class="f1 btn _block mr8 _del">Delete</button>
        <button type="submit" id="btnSaveSetting" class="btn f3 _block">Save</button>
    </div>
</form>
<!-- setting end -->
<!-- token start -->
<form class="tab-panel" id="formToken">
    <div class="df pl8 pr16 pt8 pb8 hr">
        <div class="mr8">
            <i class="i _light"></i>
        </div>
        <div class="f1 fs12 lh16 pt4 pb4 c_s">
            <p>Help you find out all local style name in current page</p>
            <p>And rename the style name with `g_` start</p>
            <p>The color name with `c_` start</p>
            <p>You can just copy into `setting` and rename them as you like</p>
        </div>
    </div>
    <textarea class="textarea" id="styleNameBody" cols="30" rows="23"></textarea>
    <div class="footer">
        <button type="button" id="btnGetAllStyle" class="btn _block">Get All Text Local Style Name</button>
    </div>
</form>
<!-- token end -->
<script>
    const _api = {
        doms: {
            body: document.body,
            settingBody: document.getElementById('settingBody'),
            formHtml: document.getElementById('formHtml'),
            htmlBody: document.getElementById('htmlBody'),
            CSSBody: document.getElementById('cssBody'),
            btnDelSetting: document.getElementById('btnDelSetting'),
            btnSaveSetting: document.getElementById('btnSaveSetting'),
            btnGetAllStyle: document.getElementById('btnGetAllStyle'),
            styleNamesBody: document.getElementById('styleNameBody'),
            settingSelect: document.getElementById('settingSelect'),
            settingName: document.getElementById('settingName'),
            htmlSettingText: document.getElementById('htmlSettingText')
        },
        showStyleInfo: function(data) {
            _api.doms.styleNamesBody.value = data || '';
        },
        changeSetting: function(data) {
            const settingBody = data.settingBody;
            const settingName = data.settingName;
            const settingSelect = data.settingSelect;
            if (typeof settingName !== 'undefind') {
                this.doms.settingName.value = settingName;
                this.doms.htmlSettingText.innerText = settingName;
            }
            settingBody && this.changeSettingBody(settingBody);
            settingSelect && this.changeSettingSelect({
                settingNames: settingSelect,
                currentSetting: settingName
            });
        },
        changeSettingBody: function(data = []) {
            let text = '';
            data.map(({
                name,
                value
            }) => {
                text += `"${name}" : "${value}"\n`;
            });
            this.doms.settingBody.value = text;
        },
        changeSettingSelect: function(data) {
            const settingNames = data.settingNames;
            const currentName = data.currentSetting || 'default';
            let baseHtml = '';
            for (var i = 0; i < settingNames.length; i++) {
                const itName = settingNames[i];
                if (itName === currentName) {
                    baseHtml += '<option value="' + itName + '" selected>' + itName + '</option>';
                } else {
                    baseHtml += '<option value="' + itName + '">' + itName + '</option>';
                }
            }
            this.doms.settingSelect.innerHTML = baseHtml;
        },
        showHtml: function(data) {
            const html = data.html;
            const css = data.css;
            const doms = this.doms;
            doms.CSSBody.value = css;
            doms.htmlBody.value = html;
            doms.htmlBody.select();
        },
        showMsg: function(msg) {
            const objMsg = document.createElement('div');
            objMsg.classList.add('msg');
            objMsg.innerText = msg;
            this.doms.body.append(objMsg);
            setTimeout(function() {
                objMsg.classList.add('_on');
                setTimeout(function() {
                    objMsg.classList.remove('_on');
                    setTimeout(function() {
                        objMsg.remove();
                    }, 201);
                }, 3000);
            }, 16);
        },
        init: function() {
            const _doms = _api.doms;

            // 全选文本
            document.querySelectorAll('textarea').forEach((item) => {
                return item.addEventListener('keydown', function(e) {
                    const mac = !e.shiftKey && !e.ctrlKey && e.metaKey;
                    const notMac = !e.shiftKey && !e.metaKey && e.ctrlKey;
                    if (e.keyCode === 65 && (mac || notMac)) {
                        e.preventDefault();
                        this.select();
                    }
                });
            });

            // 获取html
            _doms.formHtml.addEventListener('submit', function(e) {
                e.preventDefault();
                htmlBody.value = "Generating...";
                cssBody.value = "";
                parent.postMessage({
                    pluginMessage: {
                        type: 'getHtml'
                    }
                }, '*');
            });

            // 保存设置
            _doms.btnSaveSetting.addEventListener('click', function(e) {
                e.preventDefault();
                parent.postMessage({
                    pluginMessage: {
                        type: 'saveSetting',
                        data: {
                            settingName: _doms.settingName.value.trim().toLowerCase(),
                            settingValue: _doms.settingBody.value.trim()
                        }
                    }
                }, '*');
            });

            _doms.btnDelSetting.addEventListener('click', function(e) {
                e.preventDefault();
                var result = confirm("Are you sure to delete current setting of " + _doms.settingName.value);
                if (result) {
                    parent.postMessage({
                        pluginMessage: {
                            type: 'delCurrentSetting'
                        }
                    }, '*');
                }
            });

            // 获取所有的样式名称
            _doms.btnGetAllStyle.addEventListener('click', function(e) {
                e.preventDefault();
                _doms.styleNamesBody.value = "Loading..."
                parent.postMessage({
                    pluginMessage: {
                        type: 'getStyleInfo'
                    }
                }, '*');
            });

            // setting 切换的事件
            _doms.settingSelect.addEventListener('change', function() {
                parent.postMessage({
                    pluginMessage: {
                        type: 'changeSetting',
                        data: _doms.settingSelect.value
                    }
                }, '*');
            });

            onmessage = ((event) => {
                const type = event.data.pluginMessage.type;
                const data = event.data.pluginMessage.data;
                const msg = event.data.pluginMessage.msg;
                if (type === 'showMsg') {
                    _api.showMsg(msg);
                } else {
                    _api[type] && _api[type](data);
                    !!msg && _api.showMsg(msg);
                }
            });
        }
    };

    _api.init();
</script>